"use strict";var KTDialer=function(element,options){var the=this;if(!element){return}var defaultOptions={min:null,max:null,step:1,currency:false,decimals:0,prefix:"",suffix:""};var _construct=function(){if(KTUtil.data(element).has("dialer")===true){the=KTUtil.data(element).get("dialer")}else{_init()}};var _init=function(){the.options=KTUtil.deepExtend({},defaultOptions,options);the.element=element;the.incElement=the.element.querySelector('[data-kt-dialer-control="increase"]');the.decElement=the.element.querySelector('[data-kt-dialer-control="decrease"]');the.inputElement=the.element.querySelector("input[type]");if(_getOption("currency")==="true"){the.options.currency=true}if(_getOption("decimals")){the.options.decimals=parseInt(_getOption("decimals"))}if(_getOption("prefix")){the.options.prefix=_getOption("prefix")}if(_getOption("suffix")){the.options.suffix=_getOption("suffix")}if(_getOption("step")){the.options.step=parseFloat(_getOption("step"))}if(_getOption("min")){the.options.min=parseFloat(_getOption("min"))}if(_getOption("max")){the.options.max=parseFloat(_getOption("max"))}the.value=parseFloat(the.inputElement.value.replace(/[^\d.]/g,""));_setValue();_handlers();KTUtil.data(the.element).set("dialer",the)};var _handlers=function(){KTUtil.addEvent(the.incElement,"click",(function(e){e.preventDefault();_increase()}));KTUtil.addEvent(the.decElement,"click",(function(e){e.preventDefault();_decrease()}));KTUtil.addEvent(the.inputElement,"input",(function(e){e.preventDefault();_setValue()}))};var _increase=function(){KTEventHandler.trigger(the.element,"kt.dialer.increase",the);the.inputElement.value=the.value+the.options.step;_setValue();KTEventHandler.trigger(the.element,"kt.dialer.increased",the);return the};var _decrease=function(){KTEventHandler.trigger(the.element,"kt.dialer.decrease",the);the.inputElement.value=the.value-the.options.step;_setValue();KTEventHandler.trigger(the.element,"kt.dialer.decreased",the);return the};var _setValue=function(value){KTEventHandler.trigger(the.element,"kt.dialer.change",the);if(value!==undefined){the.value=value}else{the.value=_parse(the.inputElement.value)}if(the.options.min!==null&&the.value<the.options.min){the.value=the.options.min}if(the.options.max!==null&&the.value>the.options.max){the.value=the.options.max}the.inputElement.value=_format(the.value);the.inputElement.dispatchEvent(new Event("change"));KTEventHandler.trigger(the.element,"kt.dialer.changed",the)};var _parse=function(val){val=val.replace(/[^0-9.-]/g,"").replace(/(\..*)\./g,"$1").replace(/(?!^)-/g,"").replace(/^0+(\d)/gm,"$1");val=parseFloat(val);if(isNaN(val)){val=0}return val};var _format=function(val){val=parseFloat(val).toFixed(the.options.decimals);if(the.options.currency){val=val.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}return the.options.prefix+val+the.options.suffix};var _getOption=function(name){if(the.element.hasAttribute("data-kt-dialer-"+name)===true){var attr=the.element.getAttribute("data-kt-dialer-"+name);var value=attr;return value}else{return null}};var _destroy=function(){KTUtil.data(the.element).remove("dialer")};_construct();the.setMinValue=function(value){the.options.min=value};the.setMaxValue=function(value){the.options.max=value};the.setValue=function(value){_setValue(value)};the.getValue=function(){return the.inputElement.value};the.update=function(){_setValue()};the.increase=function(){return _increase()};the.decrease=function(){return _decrease()};the.getElement=function(){return the.element};the.destroy=function(){return _destroy()};the.on=function(name,handler){return KTEventHandler.on(the.element,name,handler)};the.one=function(name,handler){return KTEventHandler.one(the.element,name,handler)};the.off=function(name,handlerId){return KTEventHandler.off(the.element,name,handlerId)};the.trigger=function(name,event){return KTEventHandler.trigger(the.element,name,event,the,event)}};KTDialer.getInstance=function(element){if(element!==null&&KTUtil.data(element).has("dialer")){return KTUtil.data(element).get("dialer")}else{return null}};KTDialer.createInstances=function(selector='[data-kt-dialer="true"]'){var elements=document.querySelectorAll(selector);if(elements&&elements.length>0){for(var i=0,len=elements.length;i<len;i++){new KTDialer(elements[i])}}};KTDialer.init=function(){KTDialer.createInstances()};if(typeof module!=="undefined"&&typeof module.exports!=="undefined"){module.exports=KTDialer}