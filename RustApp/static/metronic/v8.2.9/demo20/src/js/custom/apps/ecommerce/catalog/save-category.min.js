"use strict";var KTAppEcommerceSaveCategory=function(){const initQuill=()=>{const elements=["#kt_ecommerce_add_category_description","#kt_ecommerce_add_category_meta_description"];elements.forEach((element=>{let quill=document.querySelector(element);if(!quill){return}quill=new Quill(element,{modules:{toolbar:[[{header:[1,2,false]}],["bold","italic","underline"],["image","code-block"]]},placeholder:"Type your text here...",theme:"snow"})}))};const initTagify=()=>{const elements=["#kt_ecommerce_add_category_meta_keywords"];elements.forEach((element=>{const tagify=document.querySelector(element);if(!tagify){return}new Tagify(tagify)}))};const initFormRepeater=()=>{$("#kt_ecommerce_add_category_conditions").repeater({initEmpty:false,defaultValues:{"text-input":"foo"},show:function(){$(this).slideDown();initConditionsSelect2()},hide:function(deleteElement){$(this).slideUp(deleteElement)}})};const initConditionsSelect2=()=>{const allConditionTypes=document.querySelectorAll('[data-kt-ecommerce-catalog-add-category="condition_type"]');allConditionTypes.forEach((type=>{if($(type).hasClass("select2-hidden-accessible")){return}else{$(type).select2({minimumResultsForSearch:-1})}}));const allConditionEquals=document.querySelectorAll('[data-kt-ecommerce-catalog-add-category="condition_equals"]');allConditionEquals.forEach((equal=>{if($(equal).hasClass("select2-hidden-accessible")){return}else{$(equal).select2({minimumResultsForSearch:-1})}}))};const handleStatus=()=>{const target=document.getElementById("kt_ecommerce_add_category_status");const select=document.getElementById("kt_ecommerce_add_category_status_select");const statusClasses=["bg-success","bg-warning","bg-danger"];$(select).on("change",(function(e){const value=e.target.value;switch(value){case"published":{target.classList.remove(...statusClasses);target.classList.add("bg-success");hideDatepicker();break}case"scheduled":{target.classList.remove(...statusClasses);target.classList.add("bg-warning");showDatepicker();break}case"unpublished":{target.classList.remove(...statusClasses);target.classList.add("bg-danger");hideDatepicker();break}default:break}}));const datepicker=document.getElementById("kt_ecommerce_add_category_status_datepicker");$("#kt_ecommerce_add_category_status_datepicker").flatpickr({enableTime:true,dateFormat:"Y-m-d H:i"});const showDatepicker=()=>{datepicker.parentNode.classList.remove("d-none")};const hideDatepicker=()=>{datepicker.parentNode.classList.add("d-none")}};const handleConditions=()=>{const allConditions=document.querySelectorAll('[name="method"][type="radio"]');const conditionMatch=document.querySelector('[data-kt-ecommerce-catalog-add-category="auto-options"]');allConditions.forEach((radio=>{radio.addEventListener("change",(e=>{if(e.target.value==="1"){conditionMatch.classList.remove("d-none")}else{conditionMatch.classList.add("d-none")}}))}))};const handleSubmit=()=>{let validator;const form=document.getElementById("kt_ecommerce_add_category_form");const submitButton=document.getElementById("kt_ecommerce_add_category_submit");validator=FormValidation.formValidation(form,{fields:{category_name:{validators:{notEmpty:{message:"Category name is required"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row",eleInvalidClass:"",eleValidClass:""})}});submitButton.addEventListener("click",(e=>{e.preventDefault();if(validator){validator.validate().then((function(status){console.log("validated!");if(status=="Valid"){submitButton.setAttribute("data-kt-indicator","on");submitButton.disabled=true;setTimeout((function(){submitButton.removeAttribute("data-kt-indicator");Swal.fire({text:"Form has been successfully submitted!",icon:"success",buttonsStyling:false,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}}).then((function(result){if(result.isConfirmed){submitButton.disabled=false;window.location=form.getAttribute("data-kt-redirect")}}))}),2e3)}else{Swal.fire({text:"Sorry, looks like there are some errors detected, please try again.",icon:"error",buttonsStyling:false,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})}}))}}))};return{init:function(){initQuill();initTagify();initFormRepeater();initConditionsSelect2();handleStatus();handleConditions();handleSubmit()}}}();KTUtil.onDOMContentLoaded((function(){KTAppEcommerceSaveCategory.init()}));